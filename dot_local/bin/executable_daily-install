#!/bin/bash

DESIRED_FLATPAKS_PROGRAMS=$(
echo "me.proton.Pass
com.rafaelmardojai.Blanket
it.mijorus.gearlever
io.github.flattool.Warehouse
com.anydesk.Anydesk
app.zen_browser.zen
com.saivert.pwvucontrol
com.github.tchx84.Flatseal"
)

CURRENT_FLATPAK_PROGRAMS=$(flatpak list --app --columns=application)

for app in $DESIRED_FLATPAKS_PROGRAMS; do
    if ! echo "$CURRENT_FLATPAK_PROGRAMS" | grep -q "$app"; then
	echo "Installing $app..."
	flatpak install -y "${app}"
    fi
done

echo $DESIRED_FLATPAKS_PROGRAMS

for app in $CURRENT_FLATPAK_PROGRAMS; do
    if ! echo $DESIRED_FLATPAKS_PROGRAMS | grep -q "$app"; then
	echo "Removing $app..."
	flatpak uninstall -y "${app}"
    fi
done
